<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Enter the Rift</title>
  <style>
    body {
      background-color: #0b0b0b;
      color: #e8e6e3;
      font-family: Georgia, serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }
    p {
      font-size: 1.1rem;
      text-align: center;
      max-width: 600px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 400px;
      width: 100%;
      margin-top: 2rem;
    }
    input[type="email"] {
      padding: 0.75rem 1rem;
      font-size: 1rem;
      border-radius: 6px;
      border: none;
      background-color: #1b1b1b;
      color: #f0f0f0;
    }
    button {
      padding: 0.75rem;
      background-color: #f1b847;
      color: #000;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #d6a427;
    }
    .blurb {
      margin-top: 1rem;
      font-size: 0.9rem;
      font-style: italic;
      text-align: center;
      color: #ccc;
    }
    #successMessage {
      display: none;
      margin-top: 2rem;
      padding: 1rem;
      background-color: #153f2e;
      color: #e0ffe7;
      text-align: center;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <h1>Enter the Rift</h1>
  <p>Begin your journey into Solmara… Sign up to receive <em>Rude Awakening</em>, the first story from <strong>Songs of Solmara</strong>.</p>
  
  <form id="riftForm">
    <input id="email" type="email" name="email" placeholder="Enter your email" required />
    <button type="submit">Enter the Rift</button>
    <p class="blurb">Rude Awakening is coming soon. By signing up, you'll be the first to receive the story upon release—along with exclusive lore drops and early access to the unfolding saga of Solmara.</p>
  </form>

  <div id="successMessage">
    <strong>Welcome, Riftborn.</strong><br>Your story begins now. Check your email for your first tale from Solmara.
  </div>

  <script>
    document.getElementById('riftForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;

      try {
        const response = await fetch("/.netlify/functions/subscribe", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email }),
        });

        const result = await response.json();

        if (result.success) {
          document.getElementById('riftForm').style.display = 'none';
          document.getElementById('successMessage').style.display = 'block';
        } else {
          alert("Signup failed. Please try again.");
        }
      } catch (error) {
        alert("There was an error. Please try again.");
        console.error(error);
      }
    });
  </script>
</body>
</html>
